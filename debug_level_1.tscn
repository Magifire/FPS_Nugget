[gd_scene load_steps=7 format=3 uid="uid://cuqds1s80nfkw"]

[ext_resource type="Texture2D" uid="uid://br7ql35iolv58" path="res://Art/Enviornment/kenney_prototype-textures/PNG/Light/texture_07.png" id="2_p4kxf"]
[ext_resource type="PackedScene" uid="uid://iwqw58dpnjc0" path="res://Art/Skybox/free_-_skybox_space_nebula.glb" id="3_x1o4h"]

[sub_resource type="GDScript" id="GDScript_82tah"]
script/source = "extends Node

var LocalPlayer = preload(\"res://character_body_3d.tscn\").instantiate()

func _ready():
	var root = get_tree().root
	var menu = root.get_node(\"Main Menu\")
	
	LocalPlayer.name = \"Player\"
	
	multiplayer.multiplayer_peer = null
	var peer = ENetMultiplayerPeer.new()
	
	if menu.connHost == 0:
		var localIP = IP.resolve_hostname(str(OS.get_environment(\"COMPUTERNAME\")),1)
		print(localIP)
		peer.create_client(\"10.142.24.149\", int(menu.port))
		multiplayer.multiplayer_peer = peer
	elif menu.connHost == 1:
		#peer.set_bind_ip(\"127.0.0.1\")
		print(peer.create_server(7355, 16))
	
	#while(peer.get_connection_status() != 2):
	#	print(peer.get_connection_status())
	
	root.get_node(\"Debug Level1\").get_node(\"Player Spawner\").add_child(LocalPlayer)
	
	root.remove_child(menu)
"

[sub_resource type="BoxShape3D" id="BoxShape3D_ig4xm"]
size = Vector3(60, 2, 60)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_6lopv"]
albedo_texture = ExtResource("2_p4kxf")
uv1_scale = Vector3(15, 10, 1)

[sub_resource type="BoxMesh" id="BoxMesh_dmje7"]

[node name="Debug Level1" type="Node3D"]
script = SubResource("GDScript_82tah")

[node name="StaticBody3D" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)
axis_lock_linear_x = true
axis_lock_linear_y = true
axis_lock_linear_z = true
axis_lock_angular_x = true
axis_lock_angular_y = true
axis_lock_angular_z = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D"]
shape = SubResource("BoxShape3D_ig4xm")

[node name="MeshInstance3D" type="MeshInstance3D" parent="StaticBody3D"]
transform = Transform3D(60, 0, 0, 0, 2, 0, 0, 0, 60, 0.16547, 0.0435162, -0.00362776)
material_override = SubResource("StandardMaterial3D_6lopv")
mesh = SubResource("BoxMesh_dmje7")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.991349, 0.131253, 0, -0.131253, 0.991349, 0, 29.7254, 0)

[node name="Skybox" parent="." instance=ExtResource("3_x1o4h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 34.0592, 17.9548, -40.0645)

[node name="MultiplayerSpawner" type="MultiplayerSpawner" parent="."]
process_mode = 3
_spawnable_scenes = PackedStringArray("res://character_body_3d.tscn")
spawn_path = NodePath("../Player Spawner")

[node name="Player Spawner" type="Node3D" parent="."]

[node name="MultiplayerSynchronizer" type="MultiplayerSynchronizer" parent="."]
process_mode = 3
visibility_update_mode = 1
